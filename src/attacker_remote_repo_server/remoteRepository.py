from flask import Flask, request, session
from flask_pymongo import PyMongo
from flask_session import Session
from pymongo import MongoClient



app = Flask(__name__)

# mongodb_client = PyMongo(app, uri="mongodb://localhost:27017")
# db = mongodb_client.db

# app.config["MONGO_URI"] = "mongodb://localhost:27017/todo_db"
# mongodb_client = PyMongo(app)
# db = mongodb_client.db

# # client = MongoClient("mongodb://localhost:27017/")
# # db = client["med_data"]
# # my_collection = db["patient_data"]

# # app_info={
	
# # }

# db.todo_db.insert(
   
#      {"_appId": 20, "ip":'127.0.0.1', "port":8000, "status":0 }
   
# )

# client=MongoClient()

 

# # Connect with the portnumber and host

# client = MongoClient("mongodb://localhost:27017/")

 

# db = client["med_data"]



# my_collection = db["patient_data"]



# patient_record = {

#    "_appId": 20, "ip":'127.0.0.1', "port":8000, "status":0 

# }



# my_collection.insert_one(patient_record)

@app.route('/getFile', methods=['POST'])
def appInfo():
	#appInfo = request.get_json()
	args = request.files['file']
	args.save("./remote_response/"+ args.filename)
	#appId = args.get('app-id')
	#response = {}
	#response = db.node_metadata.find_one({"_appId":appId})
	#print(response)
	return ""

# @app.route('/deployment/status', methods=['POST'])
# def nodeDeploymentStatus():
# 	data = request.get_json()
# 	app_info = {
# 	"_appId":data['appId']
# 	"ip":data['ip']
# 	"port":data['port']
# 	"status":data['status']
# 	}
# 	node_metadata.insert_one(app_info)


if __name__ == '__main__':
    #db.create_all()

    app.run( host="0.0.0.0", port=8000, debug=True)
